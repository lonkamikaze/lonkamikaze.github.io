{% assign h2s = content | split: '<h2 id="' %}
{% for h2 in h2s offset: 1 %}
{%	if forloop.first %}
<h1>Contents</h1>
<nav>
	<ol start="0">
		<li><a href="#">Top</a></li>
{%	endif %}
{%	assign h2_tail = h2 | split: '</h2>' %}
		<li><a href="#{{ h2_tail[0] }}</a>
{%	assign h3s = h2_tail[1] | split: '<h3 id="' %}
{%	for h3 in h3s offset: 1 %}
{%		if forloop.first %}
			<ol>
{%		endif %}
{%		assign h3_tail = h3 | split: '</h3>' %}
				<li><a href="#{{ h3_tail[0] }}</a></li>
{%		if forloop.last %}
			</ol>
{%		endif %}
{%	endfor %}
		</li>
{%	if forloop.last %}
		<li><a href="#footer">Bottom</a></li>
	</ol>
</nav>
{%	endif %}
{% endfor %}
